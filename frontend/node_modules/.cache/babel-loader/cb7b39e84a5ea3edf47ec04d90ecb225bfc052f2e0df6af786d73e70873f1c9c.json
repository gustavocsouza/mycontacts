{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState, useImperativeHandle } from 'react';\nimport isEmailValid from '../../utils/isEmailValid';\nimport useErrors from '../../hooks/useErrors';\nimport formatPhone from '../../utils/formatPhone';\nimport CategoriesService from '../../services/CategoriesService';\nimport useSafeAsyncState from '../../hooks/useSafeAsyncState';\nexport default function useContactForm(onSubmit, ref) {\n  _s();\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [phone, setPhone] = useState('');\n  const [categoryId, setCategoryId] = useState('');\n  const [categories, setCategories] = useSafeAsyncState([]);\n  const [isLoadingCategories, setIsLoadingCategories] = useSafeAsyncState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const {\n    errors,\n    setError,\n    removeError,\n    getErrorMessageByFieldName\n  } = useErrors();\n  useEffect(() => {\n    const controller = new AbortController();\n    async function loadCategories() {\n      try {\n        const categoriesList = await CategoriesService.listCategories(controller.signal);\n        setCategories(categoriesList);\n      } catch {} finally {\n        setIsLoadingCategories(false);\n      }\n    }\n    loadCategories();\n    return () => {\n      controller.abort();\n    };\n  }, [setCategories, setIsLoadingCategories]);\n  const isFormValid = name && errors.length === 0;\n  useImperativeHandle(ref, () => ({\n    setFieldsValues: contact => {\n      var _contact$name, _contact$email, _contact$phone, _contact$category$id;\n      setName((_contact$name = contact.name) !== null && _contact$name !== void 0 ? _contact$name : '');\n      setEmail((_contact$email = contact.email) !== null && _contact$email !== void 0 ? _contact$email : '');\n      setPhone(formatPhone((_contact$phone = contact.phone) !== null && _contact$phone !== void 0 ? _contact$phone : ''));\n      setCategoryId((_contact$category$id = contact.category.id) !== null && _contact$category$id !== void 0 ? _contact$category$id : '');\n    },\n    resetFields: () => {\n      setName('');\n      setEmail('');\n      setPhone('');\n      setCategoryId('');\n    }\n  }), []);\n  function handleNameChange(event) {\n    setName(event.target.value);\n    if (!event.target.value) {\n      setError({\n        field: 'name',\n        message: 'Nome é obrigatório.'\n      });\n    } else {\n      removeError('name');\n    }\n  }\n  function handleEmailChange(event) {\n    setEmail(event.target.value);\n    if (event.target.value && !isEmailValid(event.target.value)) {\n      setError({\n        field: 'email',\n        message: 'E-mail inválido.'\n      });\n    } else {\n      removeError('email');\n    }\n  }\n  function handlePhoneChange(event) {\n    setPhone(formatPhone(event.target.value));\n  }\n  async function handleSubmit(event) {\n    event.preventDefault();\n    setIsSubmitting(true);\n    await onSubmit({\n      name,\n      email,\n      phone,\n      categoryId\n    });\n    setIsSubmitting(false);\n  }\n  return {\n    name,\n    email,\n    phone,\n    categoryId,\n    categories,\n    isLoadingCategories,\n    isSubmitting,\n    errors,\n    setError,\n    removeError,\n    getErrorMessageByFieldName,\n    isFormValid,\n    handleNameChange,\n    handleEmailChange,\n    handlePhoneChange,\n    handleSubmit,\n    setCategoryId\n  };\n}\n_s(useContactForm, \"nJKvg2usa0/wPieu+dA6bCisoCI=\", false, function () {\n  return [useSafeAsyncState, useSafeAsyncState, useErrors];\n});","map":{"version":3,"names":["useEffect","useState","useImperativeHandle","isEmailValid","useErrors","formatPhone","CategoriesService","useSafeAsyncState","useContactForm","onSubmit","ref","_s","name","setName","email","setEmail","phone","setPhone","categoryId","setCategoryId","categories","setCategories","isLoadingCategories","setIsLoadingCategories","isSubmitting","setIsSubmitting","errors","setError","removeError","getErrorMessageByFieldName","controller","AbortController","loadCategories","categoriesList","listCategories","signal","abort","isFormValid","length","setFieldsValues","contact","_contact$name","_contact$email","_contact$phone","_contact$category$id","category","id","resetFields","handleNameChange","event","target","value","field","message","handleEmailChange","handlePhoneChange","handleSubmit","preventDefault"],"sources":["/home/gustavo/Área de trabalho/Projects/mycontacts/frontend/src/components/ContactForm/useContactForm.js"],"sourcesContent":["import { useEffect, useState, useImperativeHandle } from 'react';\n\nimport isEmailValid from '../../utils/isEmailValid';\nimport useErrors from '../../hooks/useErrors';\n\nimport formatPhone from '../../utils/formatPhone';\nimport CategoriesService from '../../services/CategoriesService';\nimport useSafeAsyncState from '../../hooks/useSafeAsyncState';\n\nexport default function useContactForm(onSubmit, ref) {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [phone, setPhone] = useState('');\n  const [categoryId, setCategoryId] = useState('');\n  const [categories, setCategories] = useSafeAsyncState([]);\n  const [isLoadingCategories, setIsLoadingCategories] = useSafeAsyncState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const {\n    errors,\n    setError,\n    removeError,\n    getErrorMessageByFieldName,\n  } = useErrors();\n\n  useEffect(() => {\n    const controller = new AbortController();\n\n    async function loadCategories() {\n      try {\n        const categoriesList = await CategoriesService.listCategories(controller.signal);\n\n        setCategories(categoriesList);\n      } catch {} finally {\n        setIsLoadingCategories(false);\n      }\n    }\n\n    loadCategories();\n\n    return () => {\n      controller.abort();\n    };\n  }, [setCategories, setIsLoadingCategories]);\n\n  const isFormValid = (name && errors.length === 0);\n\n  useImperativeHandle(ref, () => ({\n    setFieldsValues: (contact) => {\n      setName(contact.name ?? '');\n      setEmail(contact.email ?? '');\n      setPhone(formatPhone(contact.phone ?? ''));\n      setCategoryId(contact.category.id ?? '');\n    },\n    resetFields: () => {\n      setName('');\n      setEmail('');\n      setPhone('');\n      setCategoryId('');\n    },\n  }), []);\n\n  function handleNameChange(event) {\n    setName(event.target.value);\n\n    if (!event.target.value) {\n      setError({ field: 'name', message: 'Nome é obrigatório.' });\n    } else {\n      removeError('name');\n    }\n  }\n\n  function handleEmailChange(event) {\n    setEmail(event.target.value);\n\n    if (event.target.value && !isEmailValid(event.target.value)) {\n      setError({ field: 'email', message: 'E-mail inválido.' });\n    } else {\n      removeError('email');\n    }\n  }\n\n  function handlePhoneChange(event) {\n    setPhone(formatPhone(event.target.value));\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    setIsSubmitting(true);\n\n    await onSubmit({\n      name,\n      email,\n      phone,\n      categoryId,\n    });\n\n    setIsSubmitting(false);\n  }\n\n  return {\n    name,\n    email,\n    phone,\n    categoryId,\n    categories,\n    isLoadingCategories,\n    isSubmitting,\n    errors,\n    setError,\n    removeError,\n    getErrorMessageByFieldName,\n    isFormValid,\n    handleNameChange,\n    handleEmailChange,\n    handlePhoneChange,\n    handleSubmit,\n    setCategoryId,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}