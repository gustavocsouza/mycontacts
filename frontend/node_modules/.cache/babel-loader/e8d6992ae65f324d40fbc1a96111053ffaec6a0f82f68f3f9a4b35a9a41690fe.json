{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useCallback, useDeferredValue, useEffect, useMemo, useState } from 'react';\nimport ContactsService from '../../services/ContactsService';\nimport toast from '../../utils/toast';\nexport default function useHome() {\n  _s();\n  const [contacts, setContacts] = useState([]);\n  const [orderBy, setOrderBy] = useState('asc');\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasError, setHasError] = useState(false);\n  const [isDeleteModalVisible, setIsDeleteModalVisible] = useState(false);\n  const [contactBeingDeleted, setContactBeingDeleted] = useState(null);\n  const [isLoadingDelete, setIsLoadingDelete] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const deferredSearchTerm = useDeferredValue(searchTerm);\n  const filteredContacts = useMemo(() => contacts.filter(contact => contact.name.toLowerCase().includes(deferredSearchTerm.toLowerCase())), [contacts, deferredSearchTerm]);\n  const loadContacts = useCallback(async signal => {\n    try {\n      setIsLoading(true);\n      const contactsList = await ContactsService.listContacts(orderBy, signal);\n      setContacts(contactsList);\n      setHasError(false);\n    } catch (error) {\n      if (error instanceof DOMException && error.name === 'AbortError') {\n        return;\n      }\n      setHasError(true);\n      setContacts([]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [orderBy]);\n  useEffect(() => {\n    const controller = new AbortController();\n    loadContacts(controller.signal);\n    return () => {\n      controller.abort();\n    };\n  }, [loadContacts]);\n  const handleToggleOrderBy = useCallback(() => {\n    setOrderBy(prevState => prevState === 'asc' ? 'desc' : 'asc');\n  }, []);\n  function handleChangeSearchTerm(event) {\n    setSearchTerm(event.target.value);\n  }\n  function handleTryAgain() {\n    loadContacts();\n  }\n  const handleDeleteContact = useCallback(contact => {\n    setContactBeingDeleted(contact);\n    setIsDeleteModalVisible(true);\n  }, []);\n  function handleCloseDeleteModal() {\n    setIsDeleteModalVisible(false);\n  }\n  async function handleConfirmDeleteContact() {\n    try {\n      setIsLoadingDelete(true);\n      await ContactsService.deleteContact(contactBeingDeleted.id);\n      setContacts(prevState => prevState.filter(contact => contact.id !== contactBeingDeleted.id));\n      handleCloseDeleteModal();\n      toast({\n        type: 'success',\n        text: 'Contato deletado com sucesso!'\n      });\n    } catch {\n      toast({\n        type: 'danger',\n        text: 'Ocorreu um erro ao deletar o contato!'\n      });\n    } finally {\n      setIsLoadingDelete(false);\n    }\n  }\n  return {\n    contacts,\n    orderBy,\n    searchTerm,\n    isLoading,\n    hasError,\n    isDeleteModalVisible,\n    contactBeingDeleted,\n    isLoadingDelete,\n    filteredContacts,\n    handleToggleOrderBy,\n    handleChangeSearchTerm,\n    handleTryAgain,\n    handleDeleteContact,\n    handleCloseDeleteModal,\n    handleConfirmDeleteContact\n  };\n}\n_s(useHome, \"TMFVln0HYM7zJDPpSQZD2t8Q6OQ=\", false, function () {\n  return [useDeferredValue];\n});","map":{"version":3,"names":["useCallback","useDeferredValue","useEffect","useMemo","useState","ContactsService","toast","useHome","_s","contacts","setContacts","orderBy","setOrderBy","isLoading","setIsLoading","hasError","setHasError","isDeleteModalVisible","setIsDeleteModalVisible","contactBeingDeleted","setContactBeingDeleted","isLoadingDelete","setIsLoadingDelete","searchTerm","setSearchTerm","deferredSearchTerm","filteredContacts","filter","contact","name","toLowerCase","includes","loadContacts","signal","contactsList","listContacts","error","DOMException","controller","AbortController","abort","handleToggleOrderBy","prevState","handleChangeSearchTerm","event","target","value","handleTryAgain","handleDeleteContact","handleCloseDeleteModal","handleConfirmDeleteContact","deleteContact","id","type","text"],"sources":["/home/gustavo/Ãrea de trabalho/Projects/mycontacts/frontend/src/pages/Home/useHome.js"],"sourcesContent":["import {\n  useCallback, useDeferredValue, useEffect, useMemo, useState,\n} from 'react';\n\nimport ContactsService from '../../services/ContactsService';\nimport toast from '../../utils/toast';\n\nexport default function useHome() {\n  const [contacts, setContacts] = useState([]);\n  const [orderBy, setOrderBy] = useState('asc');\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasError, setHasError] = useState(false);\n  const [isDeleteModalVisible, setIsDeleteModalVisible] = useState(false);\n  const [contactBeingDeleted, setContactBeingDeleted] = useState(null);\n  const [isLoadingDelete, setIsLoadingDelete] = useState(false);\n\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const deferredSearchTerm = useDeferredValue(searchTerm);\n\n  const filteredContacts = useMemo(() => contacts.filter((contact) => (\n    contact.name.toLowerCase().includes(deferredSearchTerm.toLowerCase())\n  )), [contacts, deferredSearchTerm]);\n\n  const loadContacts = useCallback(async (signal) => {\n    try {\n      setIsLoading(true);\n\n      const contactsList = await ContactsService.listContacts(orderBy, signal);\n\n      setContacts(contactsList);\n      setHasError(false);\n    } catch (error) {\n      if (error instanceof DOMException && error.name === 'AbortError') {\n        return;\n      }\n\n      setHasError(true);\n      setContacts([]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [orderBy]);\n\n  useEffect(() => {\n    const controller = new AbortController();\n    loadContacts(controller.signal);\n\n    return () => {\n      controller.abort();\n    };\n  }, [loadContacts]);\n\n  const handleToggleOrderBy = useCallback(() => {\n    setOrderBy((prevState) => (prevState === 'asc' ? 'desc' : 'asc'));\n  }, []);\n\n  function handleChangeSearchTerm(event) {\n    setSearchTerm(event.target.value);\n  }\n\n  function handleTryAgain() {\n    loadContacts();\n  }\n\n  const handleDeleteContact = useCallback((contact) => {\n    setContactBeingDeleted(contact);\n    setIsDeleteModalVisible(true);\n  }, []);\n\n  function handleCloseDeleteModal() {\n    setIsDeleteModalVisible(false);\n  }\n\n  async function handleConfirmDeleteContact() {\n    try {\n      setIsLoadingDelete(true);\n      await ContactsService.deleteContact(contactBeingDeleted.id);\n\n      setContacts((prevState) => prevState.filter(\n        (contact) => contact.id !== contactBeingDeleted.id,\n      ));\n      handleCloseDeleteModal();\n\n      toast({\n        type: 'success',\n        text: 'Contato deletado com sucesso!',\n      });\n    } catch {\n      toast({\n        type: 'danger',\n        text: 'Ocorreu um erro ao deletar o contato!',\n      });\n    } finally {\n      setIsLoadingDelete(false);\n    }\n  }\n\n  return {\n    contacts,\n    orderBy,\n    searchTerm,\n    isLoading,\n    hasError,\n    isDeleteModalVisible,\n    contactBeingDeleted,\n    isLoadingDelete,\n    filteredContacts,\n    handleToggleOrderBy,\n    handleChangeSearchTerm,\n    handleTryAgain,\n    handleDeleteContact,\n    handleCloseDeleteModal,\n    handleConfirmDeleteContact,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}