{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport ContactsService from '../../services/ContactsService';\nimport toast from '../../utils/toast';\nimport useSafeAsyncAction from '../../hooks/useSafeAsyncAction';\nexport default function useEditContact() {\n  _s();\n  const [isLoading, setIsLoading] = useState(true);\n  const [contactName, setContactName] = useState('');\n  const contactFormRef = useRef(null);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const safeAsyncAction = useSafeAsyncAction();\n  useEffect(() => {\n    const controller = new AbortController();\n    async function loadContact() {\n      try {\n        const contactData = await ContactsService.getContactById(id, controller.signal);\n        safeAsyncAction(() => {\n          contactFormRef.current.setFieldsValues(contactData);\n          setIsLoading(false);\n          setContactName(contactData.name);\n        });\n      } catch (error) {\n        if (!(error instanceof DOMException && error.name === 'AbortError')) {\n          safeAsyncAction(() => {\n            navigate('/', {\n              replace: true\n            });\n            toast({\n              type: 'danger',\n              text: 'Contato não encontrado!'\n            });\n          });\n        }\n      }\n    }\n    loadContact();\n    return () => {\n      controller.abort();\n    };\n  }, [id, navigate, safeAsyncAction]);\n  async function handleSubmit(contact) {\n    try {\n      const contactData = await ContactsService.updateContact(id, contact);\n      setContactName(contactData.name);\n      toast({\n        type: 'success',\n        text: 'Contato editado com sucesso!'\n      });\n    } catch {\n      toast({\n        type: 'danger',\n        text: 'Ocorreu um erro ao editar o contato!'\n      });\n    }\n  }\n  return {\n    isLoading,\n    contactName,\n    contactFormRef,\n    handleSubmit\n  };\n}\n_s(useEditContact, \"U+UgkL8pyGMwFZuD3xZ1u8uhH+o=\", false, function () {\n  return [useParams, useNavigate, useSafeAsyncAction];\n});","map":{"version":3,"names":["useEffect","useRef","useState","useParams","useNavigate","ContactsService","toast","useSafeAsyncAction","useEditContact","_s","isLoading","setIsLoading","contactName","setContactName","contactFormRef","id","navigate","safeAsyncAction","controller","AbortController","loadContact","contactData","getContactById","signal","current","setFieldsValues","name","error","DOMException","replace","type","text","abort","handleSubmit","contact","updateContact"],"sources":["/home/gustavo/Área de trabalho/Projects/mycontacts/frontend/src/pages/EditContact/useEditContact.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\n\nimport ContactsService from '../../services/ContactsService';\n\nimport toast from '../../utils/toast';\nimport useSafeAsyncAction from '../../hooks/useSafeAsyncAction';\n\nexport default function useEditContact() {\n  const [isLoading, setIsLoading] = useState(true);\n  const [contactName, setContactName] = useState('');\n  const contactFormRef = useRef(null);\n\n  const { id } = useParams();\n  const navigate = useNavigate();\n\n  const safeAsyncAction = useSafeAsyncAction();\n\n  useEffect(() => {\n    const controller = new AbortController();\n\n    async function loadContact() {\n      try {\n        const contactData = await ContactsService.getContactById(id, controller.signal);\n\n        safeAsyncAction(() => {\n          contactFormRef.current.setFieldsValues(contactData);\n          setIsLoading(false);\n          setContactName(contactData.name);\n        });\n      } catch (error) {\n        if (!(error instanceof DOMException && error.name === 'AbortError')) {\n          safeAsyncAction(() => {\n            navigate('/', { replace: true });\n            toast({\n              type: 'danger',\n              text: 'Contato não encontrado!',\n            });\n          });\n        }\n      }\n    }\n\n    loadContact();\n\n    return () => {\n      controller.abort();\n    };\n  }, [id, navigate, safeAsyncAction]);\n\n  async function handleSubmit(contact) {\n    try {\n      const contactData = await ContactsService.updateContact(id, contact);\n\n      setContactName(contactData.name);\n\n      toast({\n        type: 'success',\n        text: 'Contato editado com sucesso!',\n      });\n    } catch {\n      toast({\n        type: 'danger',\n        text: 'Ocorreu um erro ao editar o contato!',\n      });\n    }\n  }\n\n  return {\n    isLoading,\n    contactName,\n    contactFormRef,\n    handleSubmit,\n  };\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AAEzD,OAAOC,eAAe,MAAM,gCAAgC;AAE5D,OAAOC,KAAK,MAAM,mBAAmB;AACrC,OAAOC,kBAAkB,MAAM,gCAAgC;AAE/D,eAAe,SAASC,cAAcA,CAAA,EAAG;EAAAC,EAAA;EACvC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACU,WAAW,EAAEC,cAAc,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAMY,cAAc,GAAGb,MAAM,CAAC,IAAI,CAAC;EAEnC,MAAM;IAAEc;EAAG,CAAC,GAAGZ,SAAS,CAAC,CAAC;EAC1B,MAAMa,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAE9B,MAAMa,eAAe,GAAGV,kBAAkB,CAAC,CAAC;EAE5CP,SAAS,CAAC,MAAM;IACd,MAAMkB,UAAU,GAAG,IAAIC,eAAe,CAAC,CAAC;IAExC,eAAeC,WAAWA,CAAA,EAAG;MAC3B,IAAI;QACF,MAAMC,WAAW,GAAG,MAAMhB,eAAe,CAACiB,cAAc,CAACP,EAAE,EAAEG,UAAU,CAACK,MAAM,CAAC;QAE/EN,eAAe,CAAC,MAAM;UACpBH,cAAc,CAACU,OAAO,CAACC,eAAe,CAACJ,WAAW,CAAC;UACnDV,YAAY,CAAC,KAAK,CAAC;UACnBE,cAAc,CAACQ,WAAW,CAACK,IAAI,CAAC;QAClC,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;QACd,IAAI,EAAEA,KAAK,YAAYC,YAAY,IAAID,KAAK,CAACD,IAAI,KAAK,YAAY,CAAC,EAAE;UACnET,eAAe,CAAC,MAAM;YACpBD,QAAQ,CAAC,GAAG,EAAE;cAAEa,OAAO,EAAE;YAAK,CAAC,CAAC;YAChCvB,KAAK,CAAC;cACJwB,IAAI,EAAE,QAAQ;cACdC,IAAI,EAAE;YACR,CAAC,CAAC;UACJ,CAAC,CAAC;QACJ;MACF;IACF;IAEAX,WAAW,CAAC,CAAC;IAEb,OAAO,MAAM;MACXF,UAAU,CAACc,KAAK,CAAC,CAAC;IACpB,CAAC;EACH,CAAC,EAAE,CAACjB,EAAE,EAAEC,QAAQ,EAAEC,eAAe,CAAC,CAAC;EAEnC,eAAegB,YAAYA,CAACC,OAAO,EAAE;IACnC,IAAI;MACF,MAAMb,WAAW,GAAG,MAAMhB,eAAe,CAAC8B,aAAa,CAACpB,EAAE,EAAEmB,OAAO,CAAC;MAEpErB,cAAc,CAACQ,WAAW,CAACK,IAAI,CAAC;MAEhCpB,KAAK,CAAC;QACJwB,IAAI,EAAE,SAAS;QACfC,IAAI,EAAE;MACR,CAAC,CAAC;IACJ,CAAC,CAAC,MAAM;MACNzB,KAAK,CAAC;QACJwB,IAAI,EAAE,QAAQ;QACdC,IAAI,EAAE;MACR,CAAC,CAAC;IACJ;EACF;EAEA,OAAO;IACLrB,SAAS;IACTE,WAAW;IACXE,cAAc;IACdmB;EACF,CAAC;AACH;AAACxB,EAAA,CAlEuBD,cAAc;EAAA,QAKrBL,SAAS,EACPC,WAAW,EAEJG,kBAAkB;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}