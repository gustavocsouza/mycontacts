{"ast":null,"code":"var _s = $RefreshSig$();\nimport { createRef, useCallback, useEffect, useRef, useState } from 'react';\nexport default function useAnimatedList(initialValue = []) {\n  _s();\n  const [items, setItems] = useState(initialValue);\n  const [pendingRemovalItemsIds, setPendingRemovalItemsIds] = useState([]);\n  const animatedRefs = useRef(new Map());\n  const animationEndListeners = useRef(new Map());\n  const handleAnimationEnd = useCallback(itemId => {\n    const removeListener = animationEndListeners.current.get(itemId);\n    removeListener();\n    animatedRefs.current.delete(itemId);\n    animationEndListeners.current.delete(itemId);\n    setItems(prevState => prevState.filter(item => item.id !== itemId));\n    setPendingRemovalItemsIds(prevState => prevState.filter(id => itemId !== id));\n  }, []);\n  useEffect(() => {\n    pendingRemovalItemsIds.forEach(itemId => {\n      const animatedRef = animatedRefs.current.get(itemId);\n      const animatedElement = animatedRef === null || animatedRef === void 0 ? void 0 : animatedRef.current;\n      const alreadyHasListener = animationEndListeners.current.has(itemId);\n      if (animatedElement && !alreadyHasListener) {\n        const onAnimationEnd = () => handleAnimationEnd(itemId);\n        const removeListener = () => {\n          animatedElement.removeEventListener('animationend', onAnimationEnd);\n        };\n        animatedElement.addEventListener('animationend', onAnimationEnd);\n        animationEndListeners.current.set(itemId, removeListener);\n      }\n    });\n  }, [pendingRemovalItemsIds, handleAnimationEnd]);\n  useEffect(() => {\n    const removeListeners = animationEndListeners.current;\n    return () => {\n      removeListeners.forEach(removeListener => removeListener());\n    };\n  }, []);\n  const handleRemoveItem = useCallback(id => {\n    setPendingRemovalItemsIds(prevState => [...prevState, id]);\n  }, []);\n  const getAnimatedRef = useCallback(itemId => {\n    let animatedRef = animatedRefs.current.get(itemId);\n    if (!animatedRef) {\n      animatedRef = /*#__PURE__*/createRef();\n      animatedRefs.current.set(itemId, animatedRef);\n    }\n    return animatedRef;\n  }, []);\n  const renderList = useCallback(renderItem => items.map(item => {\n    const isLeaving = pendingRemovalItemsIds.includes(item.id);\n    const animatedRef = getAnimatedRef(item.id);\n    return renderItem(item, {\n      isLeaving,\n      animatedRef\n    });\n  }), [items, pendingRemovalItemsIds, getAnimatedRef]);\n  return {\n    items,\n    setItems,\n    handleRemoveItem,\n    renderList\n  };\n}\n_s(useAnimatedList, \"JTx0YRma+VnspHol7uJXzmZeTz0=\");","map":{"version":3,"names":["createRef","useCallback","useEffect","useRef","useState","useAnimatedList","initialValue","_s","items","setItems","pendingRemovalItemsIds","setPendingRemovalItemsIds","animatedRefs","Map","animationEndListeners","handleAnimationEnd","itemId","removeListener","current","get","delete","prevState","filter","item","id","forEach","animatedRef","animatedElement","alreadyHasListener","has","onAnimationEnd","removeEventListener","addEventListener","set","removeListeners","handleRemoveItem","getAnimatedRef","renderList","renderItem","map","isLeaving","includes"],"sources":["/home/gustavo/Ãrea de trabalho/Projects/mycontacts/frontend/src/hooks/useAnimatedList.js"],"sourcesContent":["import {\n  createRef, useCallback, useEffect, useRef, useState,\n} from 'react';\n\nexport default function useAnimatedList(initialValue = []) {\n  const [items, setItems] = useState(initialValue);\n  const [pendingRemovalItemsIds, setPendingRemovalItemsIds] = useState([]);\n\n  const animatedRefs = useRef(new Map());\n  const animationEndListeners = useRef(new Map());\n\n  const handleAnimationEnd = useCallback((itemId) => {\n    const removeListener = animationEndListeners.current.get(itemId);\n\n    removeListener();\n\n    animatedRefs.current.delete(itemId);\n    animationEndListeners.current.delete(itemId);\n\n    setItems((prevState) => prevState.filter((item) => item.id !== itemId));\n    setPendingRemovalItemsIds((prevState) => prevState.filter((id) => itemId !== id));\n  }, []);\n\n  useEffect(() => {\n    pendingRemovalItemsIds.forEach((itemId) => {\n      const animatedRef = animatedRefs.current.get(itemId);\n      const animatedElement = animatedRef?.current;\n      const alreadyHasListener = animationEndListeners.current.has(itemId);\n\n      if (animatedElement && !alreadyHasListener) {\n        const onAnimationEnd = () => handleAnimationEnd(itemId);\n        const removeListener = () => {\n          animatedElement.removeEventListener('animationend', onAnimationEnd);\n        };\n\n        animatedElement.addEventListener('animationend', onAnimationEnd);\n\n        animationEndListeners.current.set(itemId, removeListener);\n      }\n    });\n  }, [pendingRemovalItemsIds, handleAnimationEnd]);\n\n  useEffect(() => {\n    const removeListeners = animationEndListeners.current;\n\n    return () => {\n      removeListeners.forEach((removeListener) => removeListener());\n    };\n  }, []);\n\n  const handleRemoveItem = useCallback((id) => {\n    setPendingRemovalItemsIds((prevState) => [...prevState, id]);\n  }, []);\n\n  const getAnimatedRef = useCallback((itemId) => {\n    let animatedRef = animatedRefs.current.get(itemId);\n\n    if (!animatedRef) {\n      animatedRef = createRef();\n      animatedRefs.current.set(itemId, animatedRef);\n    }\n    return animatedRef;\n  }, []);\n\n  const renderList = useCallback((renderItem) => (\n    items.map((item) => {\n      const isLeaving = pendingRemovalItemsIds.includes(item.id);\n\n      const animatedRef = getAnimatedRef(item.id);\n\n      return renderItem(item, { isLeaving, animatedRef });\n    })\n  ), [items, pendingRemovalItemsIds, getAnimatedRef]);\n\n  return {\n    items,\n    setItems,\n    handleRemoveItem,\n    renderList,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}